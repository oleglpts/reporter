<?xml version='1.0' encoding='utf-8'?>
<book>
    <report>
        <name>$_title_0</name>
        <sql>
            <request>
                SET TIME ZONE 0;
                SELECT
                    gateway_transactiontype.nominal AS "Type",
                    gateway_moneytransaction.trans_type_id AS "Code",
                    gateway_currency.three AS "Currency",
                    count(*) AS "Count",
                    sum(gateway_moneytransaction.amount) AS "Amount"
                FROM
                    public.gateway_moneytransaction,
                    public.gateway_transactiontype,
                    public.gateway_currency,
                    public.gateway_moneyorder
                WHERE
                    gateway_moneytransaction.money_order_id = gateway_moneyorder.order_number AND
                    gateway_moneytransaction.trans_type_id = gateway_transactiontype.code AND
                    gateway_moneytransaction.currency_id = gateway_currency.code AND
                    gateway_moneytransaction.status_flag = 0 AND
                    gateway_moneytransaction.trans_datetime::date &gt;= '$_parm_from_date' AND
                    gateway_moneytransaction.trans_datetime::date &lt;= '$_parm_to_date' AND
                    (gateway_moneyorder.cust_account_id = $_parm_account OR $_parm_account = 0) AND
                    (gateway_moneyorder.client_id_id = $_parm_client OR $_parm_client = 0)
                GROUP BY
                    gateway_moneytransaction.currency_id,
                    gateway_currency.three,
                    gateway_transactiontype.nominal,
                    gateway_moneytransaction.trans_type_id
                ORDER BY
                    gateway_moneytransaction.trans_type_id
            </request>
            <group step="1">
                <field col="0" name="Type" header="no" row="2"/>
                <field col="1" name="Code" header="no" row="2"/>
                <field col="2" name="Currency" header="no" row="2"/>
                <field col="3" name="Count" header="no" row="2"/>
                <field col="4" name="Amout" header="no" row="2"/>
            </group>
        </sql>
    </report>
    <report>
        <name>$_title_1</name>
        <sql>
            <request>
                SET TIME ZONE 0;
                SELECT
                    gateway_cardbrand.nominal AS "CC",
                    sum(gateway_transactiontype.debit) AS "Count ",
                    sum(gateway_moneytransaction.amount*gateway_transactiontype.debit) AS "Amount ",
                    sum(1-gateway_transactiontype.debit) AS "Count  ",
                    sum(gateway_moneytransaction.amount*(1-gateway_transactiontype.debit)) AS "Amount  ",
                    sum(gateway_moneytransaction.amount*(2*gateway_transactiontype.debit-1)) as "Total",
                    gateway_currency.three AS "Currency"
                FROM
                    public.gateway_moneytransaction,
                    public.gateway_moneyorder,
                    public.gateway_cardbrand,
                    public.gateway_currency,
                    public.gateway_transactiontype
                WHERE
                    gateway_moneytransaction.money_order_id = gateway_moneyorder.order_number AND
                    gateway_moneytransaction.currency_id = gateway_currency.code AND
                    gateway_moneytransaction.trans_type_id = gateway_transactiontype.code AND
                    gateway_moneyorder.card_type_id = gateway_cardbrand.code AND
                    gateway_moneytransaction.status_flag = 0 AND
                    gateway_moneytransaction.trans_datetime::date &gt;= '$_parm_from_date' AND
                    gateway_moneytransaction.trans_datetime::date &lt;= '$_parm_to_date' AND
                    gateway_transactiontype.debit >= 0 AND
                    (gateway_moneyorder.cust_account_id = $_parm_account OR $_parm_account = 0) AND
                    (gateway_moneyorder.client_id_id = $_parm_client OR $_parm_client = 0)
                GROUP BY gateway_cardbrand.nominal, gateway_currency.three
                ORDER BY gateway_cardbrand.nominal, gateway_currency.three
            </request>
            <group step="1">
                <field col="0" name="Type" header="no" row="2"/>
                <field col="1" name="Code" header="no" row="2"/>
                <field col="2" name="Currency" header="no" row="2"/>
                <field col="3" name="Count" header="no" row="2"/>
                <field col="4" name="Amout" header="no" row="2"/>
                <field col="5" name="Amout" header="no" row="2"/>
                <field col="6" name="Amout" header="no" row="2"/>
            </group>
        </sql>
    </report>
    <report>
        <name>$_title_2</name>
        <sql>
            <request>
                SET TIME ZONE 0;
                SELECT
                    gateway_providermid.descriptor AS "MID",
                    sum(gateway_transactiontype.debit) AS "Count ",
                    sum(gateway_moneytransaction.amount*gateway_transactiontype.debit) AS "Amount ",
                    sum(1-gateway_transactiontype.debit) AS "Count  ",
                    sum(gateway_moneytransaction.amount*(1-gateway_transactiontype.debit)) AS "Amount  ",
                    sum(gateway_moneytransaction.amount*(2*gateway_transactiontype.debit-1)) as "Total",
                    gateway_currency.three AS "Currency"
                FROM
                    public.gateway_moneytransaction,
                    public.gateway_moneyorder,
                    public.gateway_providermid,
                    public.gateway_currency,
                    public.gateway_transactiontype
                WHERE
                    gateway_moneytransaction.money_order_id = gateway_moneyorder.order_number AND
                    gateway_moneytransaction.currency_id = gateway_currency.code AND
                    gateway_moneytransaction.trans_type_id = gateway_transactiontype.code AND
                    gateway_moneyorder.mid_id = gateway_providermid.mid AND
                    gateway_moneytransaction.status_flag = 0 AND
                    gateway_moneytransaction.trans_datetime::date &gt;= '$_parm_from_date' AND
                    gateway_moneytransaction.trans_datetime::date &lt;= '$_parm_to_date' AND
                    gateway_transactiontype.debit >= 0 AND
                    (gateway_moneyorder.cust_account_id = $_parm_account OR $_parm_account = 0) AND
                    (gateway_moneyorder.client_id_id = $_parm_client OR $_parm_client = 0)
                GROUP BY gateway_providermid.descriptor, gateway_currency.three
                ORDER BY gateway_providermid.descriptor, gateway_currency.three
            </request>
            <group step="1">
                <field col="0" name="Type" header="no" row="2"/>
                <field col="1" name="Code" header="no" row="2"/>
                <field col="2" name="Currency" header="no" row="2"/>
                <field col="3" name="Count" header="no" row="2"/>
                <field col="4" name="Amout" header="no" row="2"/>
                <field col="5" name="Amout" header="no" row="2"/>
                <field col="6" name="Amout" header="no" row="2"/>
            </group>
        </sql>
    </report>
</book>
